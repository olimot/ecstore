(()=>{function h(r,o){new ResizeObserver(e=>{let t=e.find(n=>n.target===r);!t||o({x:t.devicePixelContentBoxSize[0].inlineSize,y:t.devicePixelContentBoxSize[0].blockSize})}).observe(r,{box:["device-pixel-content-box"]})}var y=class{entities;components;constructor(){this.components={};let o={};this.entities=new Proxy(o,{get:(s,e)=>{let t=s[e];return t||(t=new Proxy({id:e},{set:(n,i,d)=>{if(i==="id")return!1;if(d===void 0){if(this.components[i]){let f=this.components[i].indexOf(t);f!==-1&&this.components[i].splice(f,1)}delete n[i]}else this.components[i]||(this.components[i]=[]),this.components[i].indexOf(t)===-1&&this.components[i].push(t),n[i]=d;return!0},deleteProperty:(n,i)=>{if(this.components[i]){let d=this.components[i].indexOf(t);d!==-1&&this.components[i].splice(d,1)}return delete n[i],!0}}),s[e]=t),t},set:(s,e,t)=>{let n=this.entities[e];return Object.keys(t).forEach(i=>{if(i==="id")return;let d=t[i];d===null?delete n[i]:n[i]=d}),!0},deleteProperty:(s,e)=>{if(!(e in this.entities))return!1;let t=s[e];return Object.keys(t).forEach(n=>{if(this.components[n]){let i=this.components[n].indexOf(t);i!==-1&&this.components[n].splice(i,1)}}),delete s[e],!0}})}addCount=0;add(...o){let s=[];if(!o.length)return s;if(o.length===1){let e=o[0].id||`auto-generated ${this.addCount}`;s.push(e),this.entities[e]={...o[0]}}else for(let e=0;e<o.length;e+=1){let t=o[e].id||`auto-generated ${this.addCount}.${e}`;s.push(t),this.entities[t]={...o[e]}}return this.addCount+=1,s}delete(...o){let s=[];for(let e=0;e<o.length;e+=1){s.push({...o[e]});let{id:t}=o[e];t&&this.entities[t]&&delete this.entities[t]}return s}};var g=5e3,p=.1,u=20,a=u/2,l=document.createElement("canvas");l.style.cssText="width:100%;height:100%";h(l,r=>Object.assign(l,{width:r.x,height:r.y}));var c=l.getContext("2d");if(!c)throw new Error("canvas 2d context not initialized");var E=document.getElementById("root");if(!E)throw new Error("element #root not found");E.append(l);var v=(r,o)=>{if(!r.components.velocity)return;let s=r.components.velocity.length;for(;s--;){let e=r.components.velocity[s];if(e.position&&e.velocity){let{velocity:t,position:n}=e;n.x+=t.x*o,n.y+=t.y*o,n.x>l.width+a&&(n.x=-a),n.x<-a&&(n.x=l.width+a),n.y>l.height+a&&(n.y=-a),n.y<-a&&(n.y=l.height+a)}}},T=r=>{let o=t=>{c.fillStyle="#888",c.beginPath(),c.arc(t.x,t.y,a,0,2*Math.PI,!1),c.fill(),c.lineWidth=1,c.strokeStyle="#222",c.stroke()},s=t=>{c.beginPath(),c.rect(t.x-a,t.y-a,u,u),c.fillStyle="#f28d89",c.fill(),c.lineWidth=1,c.strokeStyle="#800904",c.stroke()};if(c.globalAlpha=1,c.fillStyle="#ffffff",c.fillRect(0,0,l.width,l.height),!r.components.renderable)return;let e=r.components.renderable.length;for(;e--;){let t=r.components.renderable[e];if(t.shape&&t.position){let{shape:n,position:i}=t;n==="box"?s(i):o(i)}}},m=new y;function w(){return{x:p*(2*Math.random()-1),y:p*(2*Math.random()-1)}}function S(){return{x:Math.random()*l.width,y:Math.random()*l.height}}function P(){return Math.random()>=.5?"circle":"box"}var R=g;for(;R--;)m.add({velocity:w(),shape:P(),position:S(),renderable:!0});var x=performance.now();function b(){let r=performance.now(),o=r-x;v(m,o,r),T(m,o,r),x=r,requestAnimationFrame(b)}b();})();
//# sourceMappingURL=circle-and-boxes.js.map
