var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var h=o=>c(o,"__esModule",{value:!0});var p=(o,t)=>{for(var i in t)c(o,i,{get:t[i],enumerable:!0})},E=(o,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of f(t))!y.call(o,n)&&(i||n!=="default")&&c(o,n,{get:()=>t[n],enumerable:!(e=u(t,n))||e.enumerable});return o};var T=(o=>(t,i)=>o&&o.get(t)||(i=E(h({}),t,1),o&&o.set(t,i),i))(typeof WeakMap!="undefined"?new WeakMap:0);var g={};p(g,{default:()=>l});var l=class{entities;components;constructor(){this.components={};let t={};this.entities=new Proxy(t,{get:(i,e)=>{let n=i[e];return n||(n=new Proxy({id:e},{set:(r,s,d)=>{if(s==="id")return!1;if(d===void 0){if(this.components[s]){let a=this.components[s].indexOf(n);a!==-1&&this.components[s].splice(a,1)}delete r[s]}else this.components[s]||(this.components[s]=[]),this.components[s].indexOf(n)===-1&&this.components[s].push(n),r[s]=d;return!0},deleteProperty:(r,s)=>{if(this.components[s]){let d=this.components[s].indexOf(n);d!==-1&&this.components[s].splice(d,1)}return delete r[s],!0}}),i[e]=n),n},set:(i,e,n)=>{let r=this.entities[e];return Object.keys(n).forEach(s=>{if(s==="id")return;let d=n[s];d===null?delete r[s]:r[s]=d}),!0},deleteProperty:(i,e)=>{if(!(e in this.entities))return!1;let n=i[e];return Object.keys(n).forEach(r=>{if(this.components[r]){let s=this.components[r].indexOf(n);s!==-1&&this.components[r].splice(s,1)}}),delete i[e],!0}})}addCount=0;add(...t){let i=[];if(!t.length)return i;if(t.length===1){let e=t[0].id||`auto-generated ${this.addCount}`;i.push(e),this.entities[e]={...t[0]}}else for(let e=0;e<t.length;e+=1){let n=t[e].id||`auto-generated ${this.addCount}.${e}`;i.push(n),this.entities[n]={...t[e]}}return this.addCount+=1,i}delete(...t){let i=[];for(let e=0;e<t.length;e+=1){i.push({...t[e]});let{id:n}=t[e];n&&this.entities[n]&&delete this.entities[n]}return i}};module.exports=T(g);
//# sourceMappingURL=ECStore.js.map
